{% extends 'base.html.twig' %}

{% set title_ = provider.name %}
{% set edit = is_granted('PROVIDER_EDIT', provider) %}
{% set menus = provider.menus %}
{% set half_first = menus|slice(0, menus|length / 2) %}
{% set half_second = menus|slice(menus|length / 2) %}

{% block title %}
	{{title_}}
{% endblock %}

{% block bodyfull %}
	<div class="provider-show">
		<section class="bg-title-page pos-relative p-t-170 p-b-80 p-l-15 p-r-15" style="background-image: url({{provider.bgImg}});">
			<h1 class="tit6 t-center{% if provider.bgImg == '' %} text-dark{% endif %}">
				{{ title_ }}
			</h1>
			<h1 class="t-center h5{% if provider.bgImg == '' %} text-dark{% else %} text-light{% endif %}">
				{{provider.label}}
			</h1>
			{% if edit %}
				<span class="bgImg-edit">
					<a href="" data-toggle="modal" data-target="#providerModal">
						{{"changer le fond"}}
						<i class="fas fa-edit fa-2x" aria-hidden="true"></i>
					</a>
				</span>
			{% endif %}
		</section>

		<section class="section-mainmenu p-t-110 p-b-70 bg1-pattern">
			<div class="container">
				<div class="row">
					<div class="col-md-10 col-lg-6 p-r-35 p-r-15-lg m-l-r-auto">
						{% for menu in half_first %}
							<div class="wrap-item-mainmenu p-b-22">
								<h3 id="{{menu.category.name}}" class="tit-mainmenu tit10 p-b-25">
									{{menu.category.name}}
								</h3>
								{% for meal in menu.meals %}
									<div class="item-mainmenu m-b-36">
										<div class="flex-w flex-b m-b-3">
											<a href="{{path('meal_show', {id:meal.id,slug:meal.slug})}}" class="name-item-mainmenu txt21">
												{{meal.name}}
											</a>

											<div class="line-item-mainmenu bg3-pattern"></div>

											<div class="price-item-mainmenu txt22">
												{{meal.price}} XPF
											</div>
										</div>

										<span class="info-item-mainmenu txt23">
											{{meal.tags|map(tag => tag)|join(', ', ' et ')}}
										</span>
									</div>
								{% endfor %}
							</div>
						{% endfor %}
					</div>

					<div class="col-md-10 col-lg-6 p-l-35 p-l-15-lg m-l-r-auto">
						{% for menu in half_second %}
							<div class="wrap-item-mainmenu p-b-22">
								<h3 id="{{menu.category.name}}" class="tit-mainmenu tit10 p-b-25">
									{{menu.category.name}}
								</h3>
								{% for meal in menu.meals %}
									<div class="item-mainmenu m-b-36">
										<div class="flex-w flex-b m-b-3">
											<a href="{{path('meal_show', {id:meal.id,slug:meal.slug})}}" class="name-item-mainmenu txt21">
												{{meal.name}}
											</a>

											<div class="line-item-mainmenu bg3-pattern"></div>

											<div class="price-item-mainmenu txt22">
												{{meal.price}} XPF
											</div>
										</div>

										<span class="info-item-mainmenu txt23">
											{{meal.tags|map(tag => tag)|join(', ', ' et ')}}
										</span>
									</div>
								{% endfor %}
							</div>
						{% endfor %}
					</div>
				</div>
			</div>
		</section>


		<section class="bg2-pattern pos-relative p-t-116 p-b-110 t-center p-l-15 p-r-15">
			{% if edit %}
				<span class="bgImg-edit">
					<a href="" data-toggle="modal" data-target="#providerModal">
						{{"modifier"}}
						<i class="fas fa-edit fa-2x" aria-hidden="true"></i>
					</a>
				</span>
			{% endif %}
			<span class="tit2 t-center">
				RÃ©seaux sociaux
			</span>

			<p class="t-center m-t-35 size32 m-l-r-auto">
				{{provider.description}}
			</p>
		</section>
		<div class="parallax0 parallax100" style="background-image: url({{asset('assets/images/bg-cover-video-02.jpg')}});">
			<div class="overlay0-parallax t-center size33"></div>
		</div>
		<div class="provider-editable">
			{% if edit %}
				{% include "provider/edit.html.twig" %}
			{% endif %}
		</div>
	</div>
{% endblock %}

{% block stylesheets %}
	<style>
		.bgImg-edit {
			position: absolute;
			bottom: 10px;
			right: 10px;

		}
	</style>
{% endblock %}

{% block javascripts %}
	{% if edit %}
		<script src="https://cdn.jsdelivr.net/npm/bs-custom-file-input/dist/bs-custom-file-input.js"></script>
		<script src="{{asset('assets/vendor/autosize/autosize.min.js')}}"></script>
		<script src="{{asset('assets/custom/js/provider/app-provider.js')}}"></script>
	{% endif %}
	<script type="text/javascript" src="{{asset('assets/vendor/parallax100/parallax100.js')}}"></script>
	<script type="text/javascript">
		$('.parallax100').parallax100();
	</script>
{% endblock %}
